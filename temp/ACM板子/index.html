<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <link rel="alternate icon" type="image/png" href="/img/favicon.png">
    <title>Apeironverse | Apeiron&#39;s Blog</title>
    
<link rel="stylesheet" href="/css/reset.css">

    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/css/markdown.css">

    
<link rel="stylesheet" href="/css/fonts.css">

</head>
    <body>
        <div class="paper">
            <div class="paper-main">
                
                    <div class="post-header">
    <a class="logo" href="/">Apeironverse</a>
    <a class="go-home" href="/">
        <svg width="8" height="14" viewBox="0 0 8 14">
            <path d="M7 1L1 7l6 6" stroke="#000" stroke-width="2" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </a>
</div>
                
                <div class="post-main">

    
    
        <div class="post-main-title">
            ACM板子（持续更新）
        </div>
        <div class="post-meta">
            2025-10-02
        </div>
        <div class="post-md">
            <h3 id="一、算法"><a href="#一、算法" class="headerlink" title="一、算法"></a>一、算法</h3><h4 id="1-快速幂"><a href="#1-快速幂" class="headerlink" title="1. 快速幂"></a>1. 快速幂</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> ull = <span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="function">ull <span class="title">qpow</span><span class="params">(ull a, ull b, ull mod)</span> </span>&#123;</span><br><span class="line">	ull res = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span> (a %= mod; b; b &gt;&gt;= <span class="number">1</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (b &amp; <span class="number">1</span>) res = res * a % mod;</span><br><span class="line">		a = a * a % mod;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-最大公约数"><a href="#2-最大公约数" class="headerlink" title="2. 最大公约数"></a>2. 最大公约数</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">gcd</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">while</span> (b != <span class="number">0</span>) &#123;</span><br><span class="line">    	<span class="type">int</span> tmp = a;</span><br><span class="line">    	a = b;</span><br><span class="line">    	b = tmp % b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-求素数"><a href="#3-求素数" class="headerlink" title="3.求素数"></a>3.求素数</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">isPrime</span><span class="params">(<span class="type">int</span> a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a &lt; <span class="number">2</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; (<span class="type">long</span> <span class="type">long</span>)i * i &lt;= a; ++i)  <span class="comment">// 防溢出</span></span><br><span class="line">    <span class="keyword">if</span> (a % i == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 埃氏筛</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; prime;</span><br><span class="line"><span class="type">bool</span> is_prime[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Eratosthenes</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">  is_prime[<span class="number">0</span>] = is_prime[<span class="number">1</span>] = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) is_prime[i] = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i * i &lt;= n; ++i) &#123;</span><br><span class="line">    <span class="keyword">if</span> (is_prime[i])</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> j = i * i; j &lt;= n; j += i) is_prime[j] = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; ++i)</span><br><span class="line">    <span class="keyword">if</span> (is_prime[i]) prime.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-迭代、递归和动态规划"><a href="#4-迭代、递归和动态规划" class="headerlink" title="4.迭代、递归和动态规划"></a>4.迭代、递归和动态规划</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 递归实现斐波那契数列（时间复杂度 O(2^n)）</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fib_recursive</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) <span class="keyword">return</span> n;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">fib_recursive</span>(n<span class="number">-1</span>) + <span class="built_in">fib_recursive</span>(n<span class="number">-2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 迭代实现斐波那契数列（时间复杂度 O(n)）</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fib_iterative</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) <span class="keyword">return</span> n;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">0</span>, b = <span class="number">1</span>, c;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        c = a + b;</span><br><span class="line">        a = b;</span><br><span class="line">        b = c;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*配合记忆化数组后*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 自顶向下（递归+记忆化）</span></span><br><span class="line"><span class="type">int</span> memo[<span class="number">1000</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fib_top_down</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) <span class="keyword">return</span> n;</span><br><span class="line">    <span class="keyword">if</span> (memo[n] != <span class="number">0</span>) <span class="keyword">return</span> memo[n];</span><br><span class="line">    memo[n] = <span class="built_in">fib_top_down</span>(n<span class="number">-1</span>) + <span class="built_in">fib_top_down</span>(n<span class="number">-2</span>);</span><br><span class="line">    <span class="keyword">return</span> memo[n];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自底向上（迭代动态规划）</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fib_bottom_up</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> dp[n<span class="number">+1</span>];</span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">0</span>; dp[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        dp[i] = dp[i<span class="number">-1</span>] + dp[i<span class="number">-2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-dijkstra-单源最短路径"><a href="#5-dijkstra-单源最短路径" class="headerlink" title="5. dijkstra 单源最短路径"></a>5. dijkstra 单源最短路径</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">road</span>&#123; <span class="type">int</span> to;  <span class="type">int</span> w; &#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123; vector&lt;road&gt; r; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> dis[<span class="number">100005</span>];</span><br><span class="line"><span class="type">int</span> vis[<span class="number">100005</span>];</span><br><span class="line">node arr[<span class="number">100003</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n,m,s;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;m&gt;&gt;s;</span><br><span class="line">    <span class="type">int</span> t1,t2,tw, temp, tx;  s=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++)&#123;</span><br><span class="line">        cin&gt;&gt;t1&gt;&gt;t2&gt;&gt;tw;</span><br><span class="line">        arr[t1].r.<span class="built_in">push_back</span>(&#123;t2,tw&#125;);</span><br><span class="line">        <span class="comment">// arr[t2].r.push_back(&#123;t1,tw&#125;); //有向边就注释，无向边就留下</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fill</span>(dis,dis+n<span class="number">+1</span>,INT_MAX);</span><br><span class="line">    <span class="built_in">fill</span>(vis,vis+n<span class="number">+1</span>,<span class="number">0</span>);</span><br><span class="line">    dis[<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">    priority_queue&lt; </span><br><span class="line">        pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;, </span><br><span class="line">        vector&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&gt;, </span><br><span class="line">        greater&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&gt; </span><br><span class="line">    &gt; pq;</span><br><span class="line">    pq.<span class="built_in">push</span>(&#123;<span class="number">0</span>,<span class="number">1</span>&#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(!pq.<span class="built_in">empty</span>())&#123;</span><br><span class="line">        <span class="keyword">auto</span>[d, i] = pq.<span class="built_in">top</span>();  pq.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span>(vis[i]) <span class="keyword">continue</span>;</span><br><span class="line">        vis[i] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> iter:arr[i].r)&#123;</span><br><span class="line">            temp = dis[i]+ iter.w;</span><br><span class="line">            tx = iter.to;</span><br><span class="line">            <span class="keyword">if</span>(temp&lt;dis[tx])&#123;</span><br><span class="line">                dis[tx] = temp;</span><br><span class="line">                pq.<span class="built_in">push</span>(&#123;dis[tx],tx&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cout&lt;&lt;dis[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-线段树"><a href="#6-线段树" class="headerlink" title="6. 线段树"></a>6. 线段树</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 加法 版本</span></span><br><span class="line"><span class="type">int</span> arr[<span class="number">100005</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line">    <span class="type">int</span> l,r;</span><br><span class="line">    <span class="type">int</span> sum=<span class="number">0</span>,lz=<span class="number">0</span>;</span><br><span class="line">&#125; tree[<span class="number">400005</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> i=<span class="number">1</span>)</span></span>&#123;</span><br><span class="line">    tree[i].l = l; tree[i].r = r;</span><br><span class="line">    <span class="keyword">if</span>(r==l)&#123;</span><br><span class="line">        tree[i].sum = arr[l]; <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid = (l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">build</span>(l,mid,<span class="number">2</span>*i);</span><br><span class="line">    <span class="built_in">build</span>(mid<span class="number">+1</span>,r,<span class="number">2</span>*i<span class="number">+1</span>);</span><br><span class="line">    tree[i].sum = tree[<span class="number">2</span>*i].sum + tree[<span class="number">2</span>*i<span class="number">+1</span>].sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushdown</span><span class="params">(<span class="type">int</span> i)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tree[i].l == tree[i].r) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(tree[i].lz!=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="type">int</span> lz = tree[i].lz;</span><br><span class="line">        tree[<span class="number">2</span>*i].lz += lz; </span><br><span class="line">        tree[<span class="number">2</span>*i<span class="number">+1</span>].lz += lz;</span><br><span class="line">        tree[<span class="number">2</span>*i].sum += lz*(tree[<span class="number">2</span>*i].r-tree[<span class="number">2</span>*i].l<span class="number">+1</span>);</span><br><span class="line">        tree[<span class="number">2</span>*i<span class="number">+1</span>].sum += lz*(tree[<span class="number">2</span>*i<span class="number">+1</span>].r-tree[<span class="number">2</span>*i<span class="number">+1</span>].l<span class="number">+1</span>);</span><br><span class="line">        tree[i].lz = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 乘法+加法 版本</span></span><br><span class="line"><span class="type">int</span> arr[<span class="number">100005</span>]; <span class="type">int</span> m;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line">    <span class="type">int</span> l,r;</span><br><span class="line">    <span class="type">int</span> sum;</span><br><span class="line">    <span class="type">int</span> plz=<span class="number">0</span>,mlz=<span class="number">1</span>;</span><br><span class="line">&#125; tree[<span class="number">400005</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> i=<span class="number">1</span>)</span></span>&#123;</span><br><span class="line">    tree[i].l = l; tree[i].r = r;</span><br><span class="line">    <span class="keyword">if</span>(l==r)&#123;</span><br><span class="line">        tree[i].sum = arr[l];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid = (l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">build</span>(l,mid,i&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">build</span>(mid<span class="number">+1</span>,r,i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    tree[i].sum = (tree[i&lt;&lt;<span class="number">1</span>].sum + tree[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].sum)%m;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushdown</span><span class="params">(<span class="type">int</span> i)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tree[i].l==tree[i].r) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(tree[i].plz!=<span class="number">0</span> || tree[i].mlz!=<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="type">int</span> plz = tree[i].plz, mlz = tree[i].mlz;</span><br><span class="line">        tree[i&lt;&lt;<span class="number">1</span>].mlz = (tree[i&lt;&lt;<span class="number">1</span>].mlz*mlz)%m;</span><br><span class="line">        tree[i&lt;&lt;<span class="number">1</span>].plz = (tree[i&lt;&lt;<span class="number">1</span>].plz*mlz+plz)%m;</span><br><span class="line">        tree[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].mlz = (tree[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].mlz*mlz)%m;</span><br><span class="line">        tree[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].plz = (tree[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].plz*mlz+plz)%m;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> s1=tree[i&lt;&lt;<span class="number">1</span>].r-tree[i&lt;&lt;<span class="number">1</span>].l<span class="number">+1</span>, s2=tree[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].r-tree[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].l<span class="number">+1</span>;</span><br><span class="line">        tree[i&lt;&lt;<span class="number">1</span>].sum = (mlz*tree[i&lt;&lt;<span class="number">1</span>].sum+plz*s1)%m;</span><br><span class="line">        tree[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].sum = (mlz*tree[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].sum+plz*s2)%m;</span><br><span class="line"></span><br><span class="line">        tree[i].plz = <span class="number">0</span>; tree[i].mlz = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> mk, <span class="type">int</span> pk, <span class="type">int</span> i=<span class="number">1</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tree[i].l&gt;=l &amp;&amp; tree[i].r&lt;=r)&#123;</span><br><span class="line">        <span class="type">int</span> s = tree[i].r - tree[i].l <span class="number">+1</span>;</span><br><span class="line">        tree[i].mlz = (tree[i].mlz*mk)%m;</span><br><span class="line">        tree[i].plz = (mk*tree[i].plz + pk)%m;</span><br><span class="line">        tree[i].sum = (mk*tree[i].sum+pk*s)%m;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(tree[i].l&gt;r || tree[i].r&lt;l) <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">pushdown</span>(i);</span><br><span class="line">    <span class="keyword">if</span>(tree[i&lt;&lt;<span class="number">1</span>].r&gt;=l) <span class="built_in">add</span>(l,r,mk,pk,i&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span>(tree[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].l&lt;=r) <span class="built_in">add</span>(l,r,mk,pk,i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    tree[i].sum = (tree[i&lt;&lt;<span class="number">1</span>].sum + tree[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].sum)%m;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">search</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> i=<span class="number">1</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tree[i].l&gt;=l &amp;&amp; tree[i].r&lt;=r) <span class="keyword">return</span> tree[i].sum;</span><br><span class="line">    <span class="keyword">if</span>(tree[i].l&gt;r || tree[i].r&lt;l) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">pushdown</span>(i);</span><br><span class="line">    <span class="type">int</span> s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(tree[i&lt;&lt;<span class="number">1</span>].r&gt;=l) s = (s+<span class="built_in">search</span>(l,r,i&lt;&lt;<span class="number">1</span>))%m;</span><br><span class="line">    <span class="keyword">if</span>(tree[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].l&lt;=r) s = (s+<span class="built_in">search</span>(l,r,i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>))%m;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="7-并查集"><a href="#7-并查集" class="headerlink" title="7. 并查集"></a>7. 并查集</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> pre[<span class="number">200005</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=n;i++) pre[i]=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> i)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(pre[i] == i) <span class="keyword">return</span> i;</span><br><span class="line">    <span class="keyword">return</span> pre[i] = <span class="built_in">find</span>(pre[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">join</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> x = <span class="built_in">find</span>(i), y = <span class="built_in">find</span>(j);</span><br><span class="line">    pre[x] = y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">isSet</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span></span>&#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">find</span>(i)==<span class="built_in">find</span>(j);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-KMP"><a href="#8-KMP" class="headerlink" title="8. KMP"></a>8. KMP</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">kmp</span><span class="params">(string s, string t)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> n=s.<span class="built_in">length</span>(), l=t.<span class="built_in">length</span>();</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">next</span><span class="params">(l,<span class="number">0</span>)</span></span>;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; ans;</span><br><span class="line">	<span class="type">int</span> i=<span class="number">1</span>,pre=<span class="number">0</span>,p=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(i&lt;l)&#123;</span><br><span class="line">		<span class="keyword">if</span>(t[i]==t[pre])&#123;</span><br><span class="line">			next[i] = (++pre); i++;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">if</span>(pre==<span class="number">0</span>) i++;</span><br><span class="line">			<span class="keyword">else</span> pre = next[pre<span class="number">-1</span>];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	i=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(i&lt;n)&#123;</span><br><span class="line">		<span class="keyword">if</span>(s[i]==t[p])&#123;</span><br><span class="line">			i++; p++;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(p==<span class="number">0</span>) i++;</span><br><span class="line">		<span class="keyword">else</span> p = next[p<span class="number">-1</span>];</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(p==l)&#123;</span><br><span class="line">			ans.<span class="built_in">push_back</span>(i-p<span class="number">+1</span>);</span><br><span class="line">			p = next[p<span class="number">-1</span>];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> it:ans) cout&lt;&lt;it&lt;&lt;endl;</span><br><span class="line">	<span class="comment">//for(int i=0;i&lt;l;i++) cout&lt;&lt;next[i]&lt;&lt;&quot; &quot;;</span></span><br><span class="line">	<span class="comment">//cout&lt;&lt;endl;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="二、比赛板"><a href="#二、比赛板" class="headerlink" title="二、比赛板"></a>二、比赛板</h3><h4 id="1-解题模板"><a href="#1-解题模板" class="headerlink" title="1.解题模板"></a>1.解题模板</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  codeforce</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="type">int</span> T;</span><br><span class="line">    cin&gt;&gt;T;</span><br><span class="line">    <span class="keyword">while</span>(T--)&#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  AtCoder</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-结构体"><a href="#2-结构体" class="headerlink" title="2.结构体"></a>2.结构体</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span> &#123;</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    <span class="type">double</span> b;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重载等于操作符</span></span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>==(<span class="type">const</span> node&amp; other) <span class="type">const</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a == other.a &amp;&amp; b == other.b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重载小于操作符，用于排序和 std::map</span></span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> node&amp; other) <span class="type">const</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (a != other.a) <span class="keyword">return</span> a &lt; other.a;</span><br><span class="line">        <span class="keyword">return</span> b &lt; other.b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 为 node 定义哈希函数</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node_hash</span> &#123;</span><br><span class="line">    <span class="function"><span class="type">size_t</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> node&amp; s)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">hash</span>&lt;<span class="type">int</span>&gt;()(s.a) ^ <span class="built_in">hash</span>&lt;<span class="type">double</span>&gt;()(s.b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="3-快读快写"><a href="#3-快读快写" class="headerlink" title="3.快读快写"></a>3.快读快写</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt; <span class="keyword">inline</span> <span class="type">void</span> <span class="title">read</span><span class="params">(Tp&amp;x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	x=<span class="number">0</span>;<span class="keyword">register</span> <span class="type">bool</span> z=<span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">register</span> <span class="type">char</span> c=<span class="built_in">getchar_unlocked</span>();</span><br><span class="line">	<span class="keyword">for</span>(;!<span class="built_in">isdigit</span>(c);c=<span class="built_in">getchar_unlocked</span>()) <span class="keyword">if</span>(c==<span class="string">&#x27;-&#x27;</span>) z=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(;<span class="built_in">isdigit</span>(c);c=<span class="built_in">getchar_unlocked</span>()) x=(x&lt;&lt;<span class="number">1</span>)+(x&lt;&lt;<span class="number">3</span>)+(c^<span class="number">48</span>);</span><br><span class="line">	x=(z?x:~x<span class="number">+1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T,<span class="keyword">typename</span> ...Tp&gt; <span class="keyword">inline</span> <span class="type">void</span> <span class="title">read</span><span class="params">(T &amp;x,Tp &amp;...y)</span></span>&#123;<span class="built_in">read</span>(x);<span class="built_in">read</span>(y...);&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt; <span class="keyword">inline</span> <span class="type">void</span> <span class="title">wt</span><span class="params">(Tp x)</span></span>&#123;<span class="keyword">if</span>(x&gt;<span class="number">9</span>)<span class="built_in">wt</span>(x/<span class="number">10</span>);<span class="built_in">putchar_unlocked</span>((x%<span class="number">10</span>)+<span class="string">&#x27;0&#x27;</span>);&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt; <span class="keyword">inline</span> <span class="type">void</span> <span class="title">write</span><span class="params">(Tp x)</span></span>&#123;<span class="keyword">if</span>(x&lt;<span class="number">0</span>)<span class="built_in">putchar_unlocked</span>(<span class="string">&#x27;-&#x27;</span>),x=~x<span class="number">+1</span>;<span class="built_in">wt</span>(x);&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T,<span class="keyword">typename</span> ...Tp&gt; <span class="keyword">inline</span> <span class="type">void</span> <span class="title">write</span><span class="params">(T x,Tp ...y)</span></span>&#123;<span class="built_in">write</span>(x);<span class="built_in">putchar_unlocked</span>(<span class="string">&#x27; &#x27;</span>);<span class="built_in">write</span>(y...);&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-数据量判断"><a href="#4-数据量判断" class="headerlink" title="4.数据量判断"></a>4.数据量判断</h4><p>#常数指令操作量为10^8~10^9(一般认为是5*10^8)</p>
<table>
<thead>
<tr>
<th></th>
<th>o(logn)</th>
<th>o(n)</th>
<th>o(nlogn)</th>
<th>o(n√n)</th>
<th>o(n^2)</th>
<th>o(2^n)</th>
<th>o(n!)</th>
</tr>
</thead>
<tbody><tr>
<td>n&lt;&#x3D;11</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
</tr>
<tr>
<td>n&lt;&#x3D;25</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>❌</td>
</tr>
<tr>
<td>n&lt;&#x3D;5000</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>❌</td>
<td>❌</td>
</tr>
<tr>
<td>n&lt;&#x3D;10^5</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
</tr>
<tr>
<td>n&lt;&#x3D;10^6</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
</tr>
<tr>
<td>n&lt;&#x3D;10^7</td>
<td>✔️</td>
<td>✔️</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
</tr>
<tr>
<td>n&lt;&#x3D;10^9</td>
<td>✔️</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
</tr>
</tbody></table>

        </div>

    

</div>
                <div class="footer">
    <span>Copyright © 2025 Apeiron</span>
</div>


<link rel="stylesheet" href="/css/a11y-dark.min.css">


<script src="/js/highlight.min.js"></script>


<script src="/js/highlightjs-line-numbers.js"></script>


<script>
    hljs.initHighlightingOnLoad();
    hljs.initLineNumbersOnLoad();
</script>

            </div>
        </div>
    </body>
</html>